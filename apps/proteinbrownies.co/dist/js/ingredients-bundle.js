/**
 * Browser Bundle for the Protein Empire Ingredients System
 * 
 * This file is designed to be included directly in HTML pages via a <script> tag.
 * It exposes INGREDIENTS, SUBSTITUTION_GROUPS, and recipeSubstitution on the window object.
 */

const INGREDIENTS={"oat-flour":{name:"Oat Flour (Blended)",category:"dry",role:"structure",macrosPer100g:{calories:404,protein:14,carbs:66,fat:9,fiber:7},hydrationFactor:1,substitutes:["king-arthur-gf-mix","almond-flour","coconut-flour","whole-wheat-flour"],notes:"Made by blending rolled oats. GF if certified GF oats used."},"king-arthur-gf-mix":{name:"King Arthur GF Measure-for-Measure",category:"dry",role:"structure",macrosPer100g:{calories:355,protein:3,carbs:80,fat:1,fiber:3},hydrationFactor:1.15,substitutes:["oat-flour","almond-flour","bobs-gf-1to1"],notes:"GF blend with xanthan gum. Needs 15% more liquid.",swapNote:"+15% liquid · GF"},"bobs-gf-1to1":{name:"Bob's Red Mill GF 1-to-1",category:"dry",role:"structure",macrosPer100g:{calories:350,protein:4,carbs:78,fat:1,fiber:4},hydrationFactor:1.12,substitutes:["oat-flour","king-arthur-gf-mix"],notes:"GF blend. Needs ~12% more liquid.",swapNote:"+12% liquid · GF"},"almond-flour":{name:"Almond Flour (Blanched)",category:"dry",role:"structure",macrosPer100g:{calories:579,protein:21,carbs:22,fat:50,fiber:10},hydrationFactor:.8,substitutes:["oat-flour","coconut-flour"],notes:"High fat, needs less liquid. Denser texture.",swapNote:"-20% liquid · +fat · GF"},"coconut-flour":{name:"Coconut Flour",category:"dry",role:"structure",macrosPer100g:{calories:443,protein:19,carbs:60,fat:12,fiber:39},hydrationFactor:1.6,amountRatio:.25,substitutes:["oat-flour","almond-flour"],notes:"EXTREMELY absorbent. Use 1/4 amount + add 60% more liquid.",swapNote:"⚠️ Use 1/4 amount · +60% liquid · GF",isSpecialSwap:!0},"whole-wheat-flour":{name:"Whole Wheat Flour",category:"dry",role:"structure",macrosPer100g:{calories:340,protein:13,carbs:72,fat:2,fiber:11},hydrationFactor:1.05,substitutes:["oat-flour"],notes:"Traditional flour option.",swapNote:"+5% liquid"},"kodiak-pancake-mix":{name:"Kodiak Protein Pancake Mix",category:"dry",role:"structure",macrosPer100g:{calories:433,protein:33,carbs:73,fat:3,fiber:7},hydrationFactor:1,substitutes:["birch-benders-mix","oat-flour"],notes:"Pre-mixed pancake mix with protein.",swapNote:"33g protein/100g"},"birch-benders-mix":{name:"Birch Benders Protein Pancake Mix",category:"dry",role:"structure",macrosPer100g:{calories:400,protein:30,carbs:67,fat:4,fiber:10},hydrationFactor:1,substitutes:["kodiak-pancake-mix","oat-flour"],notes:"Alternative protein pancake mix.",swapNote:"30g protein/100g"},"whey-vanilla":{name:"Vanilla Whey Protein",category:"dry",role:"protein",macrosPer100g:{calories:400,protein:80,carbs:7,fat:5,fiber:0},hydrationFactor:1,substitutes:["whey-chocolate","casein-vanilla","pea-protein","egg-white-powder"],notes:"Fast-absorbing whey isolate/concentrate."},"whey-chocolate":{name:"Chocolate Whey Protein",category:"dry",role:"protein",macrosPer100g:{calories:405,protein:78,carbs:9,fat:5,fiber:1},hydrationFactor:1,substitutes:["whey-vanilla","casein-vanilla","pea-protein"],notes:"Chocolate flavored whey."},"casein-vanilla":{name:"Vanilla Casein Protein",category:"dry",role:"protein",macrosPer100g:{calories:370,protein:80,carbs:4,fat:2,fiber:0},hydrationFactor:1.1,substitutes:["whey-vanilla","pea-protein"],notes:"Slow-digesting. Thicker batter, needs more liquid.",swapNote:"+10% liquid"},"pea-protein":{name:"Pea Protein Isolate",category:"dry",role:"protein",macrosPer100g:{calories:375,protein:80,carbs:6,fat:2,fiber:1},hydrationFactor:1.15,substitutes:["whey-vanilla","casein-vanilla","hemp-protein"],notes:"Plant-based. Absorbs significant liquid.",swapNote:"+15% liquid · Vegan"},"hemp-protein":{name:"Hemp Protein Powder",category:"dry",role:"protein",macrosPer100g:{calories:338,protein:50,carbs:20,fat:10,fiber:18},hydrationFactor:1.1,substitutes:["pea-protein"],notes:"Lower protein concentration, earthy flavor.",swapNote:"+10% liquid · -30 protein · Vegan"},"egg-white-powder":{name:"Egg White Protein Powder",category:"dry",role:"protein",macrosPer100g:{calories:382,protein:82,carbs:4,fat:0,fiber:0},hydrationFactor:1.2,substitutes:["whey-vanilla"],notes:"Very absorbent, fluffy texture.",swapNote:"+20% liquid"},"greek-yogurt-nonfat":{name:"Non-Fat Greek Yogurt",category:"wet",role:"moisture",macrosPer100g:{calories:59,protein:10,carbs:4,fat:.7,fiber:0},hydrationFactor:1,substitutes:["greek-yogurt-2pct","cottage-cheese-blended","skyr","sour-cream-light","coconut-almond-yogurt","yogurt-none"],notes:"High protein, tangy flavor, keeps baked goods moist."},"greek-yogurt-2pct":{name:"2% Greek Yogurt",category:"wet",role:"moisture",macrosPer100g:{calories:73,protein:10,carbs:4,fat:2,fiber:0},hydrationFactor:1,substitutes:["greek-yogurt-nonfat","cottage-cheese-blended"],notes:"Slightly richer than nonfat.",swapNote:"+1g fat"},"cottage-cheese-blended":{name:"Cottage Cheese (Blended)",category:"wet",role:"moisture",macrosPer100g:{calories:98,protein:11,carbs:3,fat:4,fiber:0},hydrationFactor:.95,substitutes:["greek-yogurt-nonfat","ricotta-part-skim"],notes:"Higher protein and sodium. Blend until smooth.",swapNote:"+protein · +sodium · -5% liquid"},"ricotta-part-skim":{name:"Part-Skim Ricotta",category:"wet",role:"moisture",macrosPer100g:{calories:138,protein:11,carbs:5,fat:8,fiber:0},hydrationFactor:.9,substitutes:["cottage-cheese-blended"],notes:"Creamy texture, needs less liquid.",swapNote:"+fat · -10% liquid"},"skyr":{name:"Skyr (Icelandic Yogurt)",category:"wet",role:"moisture",macrosPer100g:{calories:63,protein:11,carbs:4,fat:.2,fiber:0},hydrationFactor:1,substitutes:["greek-yogurt-nonfat"],notes:"Similar to Greek yogurt, slightly thicker.",swapNote:"+1g protein"},"sour-cream-light":{name:"Light Sour Cream",category:"wet",role:"moisture",macrosPer100g:{calories:136,protein:3,carbs:5,fat:12,fiber:0},hydrationFactor:.95,substitutes:["greek-yogurt-nonfat"],notes:"Richer, less protein.",swapNote:"+fat · -protein"},"coconut-almond-yogurt":{name:"Coconut/Almond Yogurt (Vegan)",category:"wet",role:"moisture",macrosPer100g:{calories:80,protein:1,carbs:6,fat:5,fiber:0},hydrationFactor:1,substitutes:["greek-yogurt-nonfat","yogurt-none"],notes:"Dairy-free alternative. Use unsweetened varieties.",swapNote:"-9g protein · Vegan"},"yogurt-none":{name:"None (Omit Yogurt)",category:"wet",role:"moisture",macrosPer100g:{calories:0,protein:0,carbs:0,fat:0,fiber:0},hydrationFactor:0,amountRatio:0,substitutes:["coconut-almond-yogurt","greek-yogurt-nonfat"],notes:"Omit yogurt entirely. MUST add compensation moisture.",swapNote:"⚠️ Add 100g silken tofu OR 75g extra banana/applesauce",isSpecialSwap:!0},"egg-whites-liquid":{name:"Liquid Egg Whites",category:"wet",role:"binder",macrosPer100g:{calories:52,protein:11,carbs:.7,fat:.2,fiber:0},hydrationFactor:1,substitutes:["whole-eggs","flax-egg","chia-egg","aquafaba"],notes:"Pure protein, no fat. 3 tbsp = 1 egg white."},"whole-eggs":{name:"Whole Eggs",category:"wet",role:"binder",macrosPer100g:{calories:155,protein:13,carbs:1,fat:11,fiber:0},hydrationFactor:.9,substitutes:["egg-whites-liquid"],notes:"Adds richness and fat. 1 large egg = ~50g.",swapNote:"+10g fat · +90 cal · -10% liquid"},"flax-egg":{name:"Flax Egg",category:"wet",role:"binder",macrosPer100g:{calories:55,protein:2,carbs:3,fat:4,fiber:3},hydrationFactor:1.1,substitutes:["chia-egg","egg-whites-liquid"],notes:"1 tbsp ground flax + 3 tbsp water = 1 egg. Let sit 5 min.",swapNote:"+10% liquid · Vegan"},"chia-egg":{name:"Chia Egg",category:"wet",role:"binder",macrosPer100g:{calories:49,protein:2,carbs:4,fat:3,fiber:4},hydrationFactor:1.1,substitutes:["flax-egg"],notes:"1 tbsp chia seeds + 3 tbsp water = 1 egg. Let sit 5 min.",swapNote:"+10% liquid · Vegan"},"aquafaba":{name:"Aquafaba (Chickpea Water)",category:"wet",role:"binder",macrosPer100g:{calories:10,protein:.5,carbs:2,fat:0,fiber:0},hydrationFactor:1.15,substitutes:["flax-egg","egg-whites-liquid"],notes:"3 tbsp = 1 egg white. Low protein.",swapNote:"+15% liquid · -protein · Vegan"},"banana-mashed":{name:"Overripe Bananas (Mashed)",category:"wet",role:"sweetener",macrosPer100g:{calories:89,protein:1.1,carbs:23,fat:.3,fiber:2.6},hydrationFactor:1,substitutes:["pumpkin-puree","applesauce-unsweetened","sweet-potato-mashed"],notes:"Natural sweetener. Use very ripe bananas."},"pumpkin-puree":{name:"Pumpkin Puree (Canned)",category:"wet",role:"moisture",macrosPer100g:{calories:34,protein:1,carbs:8,fat:.1,fiber:3},hydrationFactor:1.1,substitutes:["banana-mashed","applesauce-unsweetened","butternut-squash-mashed"],notes:"Less sweet, lower calorie. Add extra sweetener if needed.",swapNote:"+10% liquid · -55 cal"},"applesauce-unsweetened":{name:"Unsweetened Applesauce",category:"wet",role:"moisture",macrosPer100g:{calories:42,protein:.2,carbs:11,fat:.1,fiber:1},hydrationFactor:1.05,substitutes:["banana-mashed","pumpkin-puree"],notes:"Neutral flavor, slightly more liquid.",swapNote:"+5% liquid · -47 cal"},"sweet-potato-mashed":{name:"Mashed Sweet Potato",category:"wet",role:"moisture",macrosPer100g:{calories:86,protein:1.6,carbs:20,fat:.1,fiber:3},hydrationFactor:1.05,substitutes:["banana-mashed","pumpkin-puree"],notes:"Natural sweetness and fiber.",swapNote:"+5% liquid"},"butternut-squash-mashed":{name:"Butternut Squash Puree",category:"wet",role:"moisture",macrosPer100g:{calories:45,protein:1,carbs:12,fat:.1,fiber:2},hydrationFactor:1.08,substitutes:["pumpkin-puree"],notes:"Similar to pumpkin, slightly sweeter.",swapNote:"+8% liquid"},"zucchini-grated":{name:"Zucchini (Grated, Squeezed)",category:"wet",role:"moisture",macrosPer100g:{calories:17,protein:1.2,carbs:3,fat:.3,fiber:1},hydrationFactor:1.2,substitutes:["carrot-grated","applesauce-unsweetened"],notes:"MUST squeeze out excess moisture before using.",swapNote:"+20% liquid · very low cal"},"carrot-grated":{name:"Carrots (Grated)",category:"wet",role:"moisture",macrosPer100g:{calories:41,protein:.9,carbs:10,fat:.2,fiber:2.8},hydrationFactor:.95,substitutes:["zucchini-grated"],notes:"Natural sweetness, holds moisture well.",swapNote:"-5% liquid"},"peanut-butter":{name:"Natural Peanut Butter",category:"wet",role:"binder",macrosPer100g:{calories:588,protein:25,carbs:20,fat:50,fiber:6},hydrationFactor:.8,substitutes:["almond-butter","sunflower-seed-butter","cashew-butter"],notes:"Acts as a binder in no-bake recipes. Use natural, drippy style."},"almond-butter":{name:"Almond Butter",category:"wet",role:"binder",macrosPer100g:{calories:614,protein:21,carbs:19,fat:56,fiber:10},hydrationFactor:.8,substitutes:["peanut-butter","cashew-butter"],notes:"Slightly sweeter than peanut butter.",swapNote:"-4g protein"},"sunflower-seed-butter":{name:"Sunflower Seed Butter",category:"wet",role:"binder",macrosPer100g:{calories:617,protein:17,carbs:24,fat:55,fiber:4},hydrationFactor:.8,substitutes:["peanut-butter"],notes:"Nut-free alternative. May turn green when baked (harmless).",swapNote:"Nut-free · -8g protein"},"cashew-butter":{name:"Cashew Butter",category:"wet",role:"binder",macrosPer100g:{calories:587,protein:18,carbs:28,fat:49,fiber:2},hydrationFactor:.85,substitutes:["peanut-butter","almond-butter"],notes:"Creamiest nut butter. Slightly sweeter.",swapNote:"-7g protein"},"medjool-dates":{name:"Medjool Dates (Pitted)",category:"wet",role:"sweetener",macrosPer100g:{calories:277,protein:1.8,carbs:75,fat:.2,fiber:7},hydrationFactor:.9,substitutes:["honey","maple-syrup"],notes:"Natural sweetener and binder for no-bake recipes. Soak if dry.",swapNote:"Whole food sweetener"},"rolled-oats":{name:"Rolled Oats",category:"dry",role:"structure",macrosPer100g:{calories:379,protein:13,carbs:67,fat:7,fiber:10},hydrationFactor:1,substitutes:["quick-oats"],notes:"Base for many bar and bite recipes. GF if certified."},"quick-oats":{name:"Quick Oats",category:"dry",role:"structure",macrosPer100g:{calories:379,protein:13,carbs:67,fat:7,fiber:10},hydrationFactor:1.05,substitutes:["rolled-oats"],notes:"Finer texture than rolled oats. Better for smoother bars.",swapNote:"+5% liquid"},"baking-powder":{name:"Baking Powder",category:"dry",role:"leavening",macrosPer100g:{calories:53,protein:0,carbs:28,fat:0,fiber:0},hydrationFactor:1,substitutes:[],notes:"Double-acting. Check freshness.",isFixed:!0},"baking-soda":{name:"Baking Soda",category:"dry",role:"leavening",macrosPer100g:{calories:0,protein:0,carbs:0,fat:0,fiber:0},hydrationFactor:1,substitutes:[],notes:"Requires acid to activate.",isFixed:!0},"chocolate-chips":{name:"Chocolate Chips",category:"dry",role:"add-in",macrosPer100g:{calories:500,protein:5,carbs:60,fat:29,fiber:5},hydrationFactor:1,substitutes:[],notes:"Optional add-in.",isFixed:!0},"blueberries-fresh":{name:"Fresh Blueberries",category:"wet",role:"add-in",macrosPer100g:{calories:57,protein:.7,carbs:14,fat:.3,fiber:2.4},hydrationFactor:1,substitutes:[],notes:"Fresh or frozen (thawed).",isFixed:!0},"walnuts-chopped":{name:"Walnuts (Chopped)",category:"dry",role:"add-in",macrosPer100g:{calories:654,protein:15,carbs:14,fat:65,fiber:7},hydrationFactor:1,substitutes:[],notes:"Optional add-in.",isFixed:!0},"cocoa-powder":{name:"Cocoa Powder (Unsweetened)",category:"dry",role:"flavor",macrosPer100g:{calories:228,protein:20,carbs:58,fat:14,fiber:33},hydrationFactor:1.15,substitutes:[],notes:"Absorbs liquid. Add extra moisture when using.",isFixed:!0,swapNote:"+15% liquid"},"lemon-zest":{name:"Fresh Lemon Zest",category:"dry",role:"flavor",macrosPer100g:{calories:47,protein:1.5,carbs:16,fat:.3,fiber:10.6},hydrationFactor:1,substitutes:[],notes:"Use microplane for best results.",isFixed:!0},"apple-diced":{name:"Fresh Apple (Diced)",category:"wet",role:"add-in",macrosPer100g:{calories:52,protein:.3,carbs:14,fat:.2,fiber:2.4},hydrationFactor:1,substitutes:[],notes:"Peeled and diced.",isFixed:!0},"cinnamon":{name:"Ground Cinnamon",category:"dry",role:"flavor",macrosPer100g:{calories:247,protein:4,carbs:81,fat:1.2,fiber:53},hydrationFactor:1,substitutes:[],notes:"Warm spice.",isFixed:!0},"vanilla-extract":{name:"Pure Vanilla Extract",category:"wet",role:"flavor",macrosPer100g:{calories:288,protein:.1,carbs:13,fat:.1,fiber:0},hydrationFactor:1,substitutes:[],notes:"Use pure extract, not imitation.",isFixed:!0},"pumpkin-pie-spice":{name:"Pumpkin Pie Spice",category:"dry",role:"flavor",macrosPer100g:{calories:342,protein:6,carbs:70,fat:8,fiber:15},hydrationFactor:1,substitutes:[],notes:"Blend of cinnamon, nutmeg, ginger, allspice, and cloves.",isFixed:!0},"honey":{name:"Honey",category:"wet",role:"sweetener",macrosPer100g:{calories:304,protein:.3,carbs:82,fat:0,fiber:0},hydrationFactor:.9,substitutes:["maple-syrup","agave-nectar"],notes:"Natural sweetener. Not vegan.",swapNote:"-10% liquid"},"maple-syrup":{name:"Pure Maple Syrup",category:"wet",role:"sweetener",macrosPer100g:{calories:260,protein:0,carbs:67,fat:0,fiber:0},hydrationFactor:.95,substitutes:["honey","agave-nectar"],notes:"Natural sweetener. Vegan.",swapNote:"-5% liquid · Vegan"},"agave-nectar":{name:"Agave Nectar",category:"wet",role:"sweetener",macrosPer100g:{calories:310,protein:0,carbs:76,fat:0,fiber:0},hydrationFactor:.9,substitutes:["honey","maple-syrup"],notes:"Very sweet. Use less than honey/maple.",swapNote:"-10% liquid · Vegan"}};

const SUBSTITUTION_GROUPS={flour:["oat-flour","king-arthur-gf-mix","bobs-gf-1to1","almond-flour","coconut-flour","whole-wheat-flour"],protein:["whey-vanilla","whey-chocolate","casein-vanilla","pea-protein","hemp-protein","egg-white-powder"],dairy:["greek-yogurt-nonfat","greek-yogurt-2pct","cottage-cheese-blended","ricotta-part-skim","skyr","sour-cream-light","coconut-almond-yogurt","yogurt-none"],eggs:["egg-whites-liquid","whole-eggs","flax-egg","chia-egg","aquafaba"],fruit:["banana-mashed","pumpkin-puree","applesauce-unsweetened","sweet-potato-mashed","butternut-squash-mashed"],vegetables:["zucchini-grated","carrot-grated"],nutButters:["peanut-butter","almond-butter","sunflower-seed-butter","cashew-butter"],sweeteners:["honey","maple-syrup","agave-nectar","medjool-dates"]};

function recipeSubstitution(t){return{recipeId:t.recipeId||"unknown",yield:t.yield||12,servingSize:t.servingSize||75,originalIngredients:t.ingredients||[],currentIngredients:[],expandedIngredient:null,unitSystem:"metric",hydrationAdjustments:[],nutritionDeltas:[],batchNutritionDeltas:[],init(){this.currentIngredients=JSON.parse(JSON.stringify(this.originalIngredients)),this.currentIngredients.forEach(t=>{t.originalId=t.id,t.isSwapped=!1,t.originalAmount=t.amount}),this.recalculate()},getIngredient:t=>INGREDIENTS[t]||null,getDisplayName(t){const e=this.getIngredient(t);return e?e.name:t},getSubstitutes(t){const e=this.getIngredient(t);return!e||e.isFixed?[]:(e.substitutes||[]).map(t=>{const e=this.getIngredient(t);return e?{id:t,name:e.name,swapNote:e.swapNote||null,isSpecialSwap:e.isSpecialSwap||!1}:null}).filter(Boolean)},canSubstitute(t){const e=this.getIngredient(t);return e&&!e.isFixed&&(e.substitutes||[]).length>0},toggleIngredient(t){if(this.expandedIngredient===t)this.expandedIngredient=null;else{const e=this.currentIngredients.find(e=>e.id===t||e.originalId===t);e&&this.canSubstitute(e.originalId)&&(this.expandedIngredient=t)}},selectSubstitute(t,e){const n=this.currentIngredients.findIndex(e=>e.originalId===t);if(-1===n)return;const i=this.currentIngredients[n],r=this.getIngredient(t),a=this.getIngredient(e);if(!r||!a)return;let s=i.originalAmount;a.amountRatio&&(s=Math.round(i.originalAmount*a.amountRatio)),this.currentIngredients[n]={...i,id:e,amount:s,isSwapped:e!==t,previousId:i.id},this.expandedIngredient=null,this.recalculate()},revertIngredient(t){const e=this.currentIngredients.findIndex(e=>e.originalId===t);if(-1===e)return;const n=this.currentIngredients[e];this.currentIngredients[e]={...n,id:n.originalId,amount:n.originalAmount,isSwapped:!1},this.recalculate()},resetAll(){this.currentIngredients.forEach((t,e)=>{this.currentIngredients[e]={...t,id:t.originalId,amount:t.originalAmount,isSwapped:!1}}),this.expandedIngredient=null,this.recalculate()},recalculate(){this.calculateHydration(),this.calculateNutrition()},calculateHydration(){this.hydrationAdjustments=[],this.currentIngredients.forEach(t=>{if(!t.isSwapped)return;const e=this.getIngredient(t.originalId),n=this.getIngredient(t.id);if(!e||!n)return;if("dry"!==e.category)return;const i=n.hydrationFactor-e.hydrationFactor,r=n.amountRatio?t.originalAmount*n.amountRatio:t.originalAmount,a=Math.round(i*r);0!==a&&this.hydrationAdjustments.push({ingredientName:n.name,originalName:e.name,adjustmentMl:a,message:a>0?`+${a}ml liquid`:`${a}ml liquid`})})},getTotalHydrationAdjustment(){return this.hydrationAdjustments.reduce((t,e)=>t+e.adjustmentMl,0)},checkHasHydrationAdjustment(){return this.hydrationAdjustments.length>0},calculateNutrition(){this.nutritionDeltas=[],this.batchNutritionDeltas=[];let t=0,e=0,n=0,i=0;this.currentIngredients.forEach(r=>{if(!r.isSwapped)return;const a=this.getIngredient(r.originalId),s=this.getIngredient(r.id);if(!a||!s)return;const d=r.originalAmount,o=r.amount,u=t=>{const e=a.macrosPer100g[t]/100*d;return s.macrosPer100g[t]/100*o-e};t+=u("calories"),e+=u("protein"),n+=u("fat"),i+=u("carbs")});const r=this.yield;Math.abs(t)>=5&&this.batchNutritionDeltas.push({name:"Calories",delta:Math.round(t),formatted:this.formatDelta(Math.round(t),"")}),Math.abs(e)>=1&&this.batchNutritionDeltas.push({name:"Protein",delta:Math.round(e),formatted:this.formatDelta(Math.round(e),"g")}),Math.abs(n)>=1&&this.batchNutritionDeltas.push({name:"Fat",delta:Math.round(n),formatted:this.formatDelta(Math.round(n),"g")}),Math.abs(i)>=1&&this.batchNutritionDeltas.push({name:"Carbs",delta:Math.round(i),formatted:this.formatDelta(Math.round(i),"g")}),Math.abs(t/r)>=1&&this.nutritionDeltas.push({name:"Calories",delta:Math.round(t/r),formatted:this.formatDelta(Math.round(t/r),"")}),Math.abs(e/r)>=.5&&this.nutritionDeltas.push({name:"Protein",delta:Math.round(e/r),formatted:this.formatDelta(Math.round(e/r),"g")}),Math.abs(n/r)>=.5&&this.nutritionDeltas.push({name:"Fat",delta:Math.round(n/r),formatted:this.formatDelta(Math.round(n/r),"g")}),Math.abs(i/r)>=1&&this.nutritionDeltas.push({name:"Carbs",delta:Math.round(i/r),formatted:this.formatDelta(Math.round(i/r),"g")})},formatDelta:(t,e)=>t>0?`+${t}${e}`:t<0?`${t}${e}`:`0${e}`,checkHasSubstitutions(){return this.currentIngredients.some(t=>t.isSwapped)},getSubstitutionCount(){return this.currentIngredients.filter(t=>t.isSwapped).length},getFormattedAmount(t){return"metric"===this.unitSystem?`${t.amount}g`:t.usUnit||`${t.amount}g`},isExpanded(t){return this.expandedIngredient===t},getIngredientClasses(t){let e="ingredient-item flex flex-col py-3 transition-all duration-200";return t.isSwapped&&(e+=" bg-brand-50 rounded-xl px-3 -mx-3"),this.canSubstitute(t.originalId)&&(e+=" cursor-pointer hover:bg-slate-50"),e}}}

// Export to window for browser usage
if(typeof window!=="undefined"){window.INGREDIENTS=INGREDIENTS;window.SUBSTITUTION_GROUPS=SUBSTITUTION_GROUPS;window.recipeSubstitution=recipeSubstitution}
